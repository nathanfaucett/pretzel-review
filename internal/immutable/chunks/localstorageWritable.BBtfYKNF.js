import{w as J}from"./index.GdwTKEnR.js";import{z as N}from"./scheduler.BZy1TXPY.js";const i={};function O(t){return t}function p(t){return t}function E(t,f,r={}){const s=typeof window<"u"&&typeof window.localStorage<"u",S=r.toJSON||p,l=r.fromJSON||O,g=r.setInitial||!0;function u(e,n){return s&&window.localStorage.setItem(e,JSON.stringify(S(n))),n}if(!i[t]){let c=function(o){u(t,o),m(o)};const e=J(f,o=>{const d=s?window.localStorage.getItem(t):null;if(d?o(l(JSON.parse(d))):g&&u(t,f),s){let w=function(a){a.key===t&&o(a.newValue?l(JSON.parse(a.newValue)):null)};return window.addEventListener("storage",w),()=>{window.removeEventListener("storage",w)}}}),{subscribe:n,set:m}=e;i[t]={set:c,update(o){c(o(N(e)))},subscribe:n}}return i[t]}export{E as l};
