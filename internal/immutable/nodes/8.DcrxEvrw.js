import{n as re,s as $,e as g,t as Q,k as le,d as p,l as j,a as w,b as E,m as W,f as d,i as M,g as f,q as X,r as H,v as ne,o as Y,w as ie,p as oe}from"../chunks/scheduler.7wqEmfhF.js";import{S as ue,i as de,c as ee,b as te,m as se,t as q,a as x,e as fe,d as ae,g as ce}from"../chunks/index.eh8_VlGM.js";import{I as pe,d as me,a as he,S as _e,y as ve,p as ge,P as we,v as be}from"../chunks/InputResults.CMxeEwp8.js";import{L as Ie}from"../chunks/i18n-svelte.Dib1W4ot.js";import{d as ye}from"../chunks/auth.VmSBZjLG.js";import{g as Ee}from"../chunks/entry.mxg6feR_.js";import{b as ke}from"../chunks/paths.DKhgm9N4.js";import{c as Se}from"../chunks/notifications.B-a4IcwG.js";function Z(t){let n,e,r,i;return r=new _e({}),{c(){n=g("div"),e=g("div"),ee(r.$$.fragment),this.h()},l(a){n=w(a,"DIV",{class:!0});var c=E(n);e=w(c,"DIV",{class:!0});var m=E(e);te(r.$$.fragment,m),m.forEach(p),c.forEach(p),this.h()},h(){d(e,"class","inline-block h-6 w-6"),d(n,"class","mr-2 flex flex-row justify-center")},m(a,c){M(a,n,c),f(n,e),se(r,e,null),i=!0},i(a){i||(q(r.$$.fragment,a),i=!0)},o(a){x(r.$$.fragment,a),i=!1},d(a){a&&p(n),ae(r)}}}function Ve(t){let n,e,r,i,a,c,m=t[2].signIn.title()+"",b,S,_,I,o,k,V,P,u,N,D,v,A,T=t[2].signIn.signIn()+"",B,y,F,z;document.title=n=t[2].signIn.title(),u=new pe({props:{name:"password",result:t[1]}});let l=t[0]&&Z();return{c(){e=$(),r=g("div"),i=g("div"),a=g("div"),c=g("h1"),b=Q(m),S=$(),_=g("form"),I=g("div"),o=g("input"),P=$(),ee(u.$$.fragment),N=$(),D=g("div"),v=g("button"),l&&l.c(),A=$(),B=Q(T),this.h()},l(s){le("svelte-qwmky9",document.head).forEach(p),e=j(s),r=w(s,"DIV",{class:!0});var L=E(r);i=w(L,"DIV",{class:!0});var G=E(i);a=w(G,"DIV",{class:!0});var C=E(a);c=w(C,"H1",{class:!0});var J=E(c);b=W(J,m),J.forEach(p),S=j(C),_=w(C,"FORM",{});var O=E(_);I=w(O,"DIV",{class:!0});var R=E(I);o=w(R,"INPUT",{class:!0,type:!0,name:!0,autocomplete:!0,placeholder:!0}),P=j(R),te(u.$$.fragment,R),R.forEach(p),N=j(O),D=w(O,"DIV",{class:!0});var K=E(D);v=w(K,"BUTTON",{type:!0,class:!0});var U=E(v);l&&l.l(U),A=j(U),B=W(U,T),U.forEach(p),K.forEach(p),O.forEach(p),C.forEach(p),G.forEach(p),L.forEach(p),this.h()},h(){d(c,"class","mb-1"),d(o,"class",k="w-full "+t[4]("password")),d(o,"type","password"),d(o,"name","password"),d(o,"autocomplete","current-password"),d(o,"placeholder",V=t[2].signIn.passwordPlaceholder()),d(I,"class","mb-2"),d(v,"type","submit"),d(v,"class","btn primary flex flex-shrink"),v.disabled=t[5],d(D,"class","flex flex-row justify-end"),d(a,"class","flex flex-grow flex-col bg-white p-4 shadow dark:bg-gray-800"),d(i,"class","mx-auto flex w-full flex-shrink flex-col p-4 py-10 md:w-72"),d(r,"class","flex flex-grow flex-col justify-end md:justify-start")},m(s,h){M(s,e,h),M(s,r,h),f(r,i),f(i,a),f(a,c),f(c,b),f(a,S),f(a,_),f(_,I),f(I,o),X(o,t[3]),f(I,P),se(u,I,null),f(_,N),f(_,D),f(D,v),l&&l.m(v,null),f(v,A),f(v,B),y=!0,F||(z=[H(o,"input",t[9]),H(o,"input",t[6]),H(_,"submit",ne(t[7]))],F=!0)},p(s,[h]){(!y||h&4)&&n!==(n=s[2].signIn.title())&&(document.title=n),(!y||h&4)&&m!==(m=s[2].signIn.title()+"")&&Y(b,m),(!y||h&16&&k!==(k="w-full "+s[4]("password")))&&d(o,"class",k),(!y||h&4&&V!==(V=s[2].signIn.passwordPlaceholder()))&&d(o,"placeholder",V),h&8&&o.value!==s[3]&&X(o,s[3]);const L={};h&2&&(L.result=s[1]),u.$set(L),s[0]?l?h&1&&q(l,1):(l=Z(),l.c(),q(l,1),l.m(v,A)):l&&(ce(),x(l,1,1,()=>{l=null}),fe()),(!y||h&4)&&T!==(T=s[2].signIn.signIn()+"")&&Y(B,T),(!y||h&32)&&(v.disabled=s[5])},i(s){y||(q(u.$$.fragment,s),q(l),y=!0)},o(s){x(u.$$.fragment,s),x(l),y=!1},d(s){s&&(p(e),p(r)),ae(u),l&&l.d(),F=!1,ie(z)}}}const De=t=>ve((n={},e)=>{e.length&&(ge(e),we("password",t.errors.message.required(),()=>{be(n.password).isNotBlank()}))});function Pe(t,n,e){let r,i,a,c,m;oe(t,Ie,u=>e(2,m=u));let b="";const S=new Set,_=me(()=>{r({password:b},Array.from(S)).done(u=>{e(1,i=u)}),S.clear()},300);function I(){S.add("password"),_(),_.flush()}function o(u){u.currentTarget.value=u.currentTarget.value.trim(),S.add(u.currentTarget.name),_()}let k=!1;async function V(u){try{e(0,k=!0),I(),i.isValid()&&(await ye(b),await Ee(`${ke}/new`))}catch{Se(m.errors.message.invalid())}finally{e(0,k=!1)}}function P(){b=this.value,e(3,b)}return t.$$.update=()=>{t.$$.dirty&4&&e(8,r=De(m)),t.$$.dirty&256&&e(1,i=r.get()),t.$$.dirty&1&&e(5,a=k),t.$$.dirty&2&&e(4,c=he(i,{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}))},[k,i,m,b,c,a,o,V,r,P]}class Ce extends ue{constructor(n){super(),de(this,n,Pe,Ve,re,{})}}export{Ce as component};
