import{n as ne,s as q,e as w,t as Q,q as le,d as m,f as N,c as b,a as E,b as W,g as d,i as H,h as c,r as X,v as F,w as oe,j as Y,x as ie,l as Z,y as ue}from"../chunks/scheduler.BZy1TXPY.js";import{S as de,i as ce,c as te,b as se,m as ae,t as C,a as O,e as fe,d as re,g as pe}from"../chunks/index.DLwqVcQA.js";import{I as me,d as he,a as _e,S as ve,y as ge,p as we,P as be,v as Ie}from"../chunks/InputResults.0iyH25Eh.js";import{L as ye}from"../chunks/i18n-svelte.Cy_NFzKh.js";import{d as Ee}from"../chunks/auth.Cuil8WDr.js";import{g as ke}from"../chunks/entry.CJ-ilwW_.js";import{b as Pe}from"../chunks/paths.CaQmGFyC.js";import{c as Se}from"../chunks/notifications.CHwUNRbm.js";import{p as Ve}from"../chunks/stores.BZhxvkSd.js";function ee(t){let i,e,r,u;return r=new ve({}),{c(){i=w("div"),e=w("div"),te(r.$$.fragment),this.h()},l(a){i=b(a,"DIV",{class:!0});var f=E(i);e=b(f,"DIV",{class:!0});var h=E(e);se(r.$$.fragment,h),h.forEach(m),f.forEach(m),this.h()},h(){d(e,"class","inline-block h-6 w-6"),d(i,"class","mr-2 flex flex-row justify-center")},m(a,f){H(a,i,f),c(i,e),ae(r,e,null),u=!0},i(a){u||(C(r.$$.fragment,a),u=!0)},o(a){O(r.$$.fragment,a),u=!1},d(a){a&&m(i),re(r)}}}function De(t){let i,e,r,u,a,f,h=t[2].signIn.title()+"",P,S,p,_,l,V,D,k,I,T,n,v,R,j=t[2].signIn.signIn()+"",U,y,$,z;document.title=i=t[2].signIn.title(),I=new me({props:{name:"password",result:t[1]}});let o=t[0]&&ee();return{c(){e=q(),r=w("div"),u=w("div"),a=w("div"),f=w("h1"),P=Q(h),S=q(),p=w("form"),_=w("div"),l=w("input"),k=q(),te(I.$$.fragment),T=q(),n=w("div"),v=w("button"),o&&o.c(),R=q(),U=Q(j),this.h()},l(s){le("svelte-qwmky9",document.head).forEach(m),e=N(s),r=b(s,"DIV",{class:!0});var L=E(r);u=b(L,"DIV",{class:!0});var G=E(u);a=b(G,"DIV",{class:!0});var x=E(a);f=b(x,"H1",{class:!0});var J=E(f);P=W(J,h),J.forEach(m),S=N(x),p=b(x,"FORM",{});var A=E(p);_=b(A,"DIV",{class:!0});var B=E(_);l=b(B,"INPUT",{class:!0,type:!0,name:!0,autocomplete:!0,placeholder:!0}),k=N(B),se(I.$$.fragment,B),B.forEach(m),T=N(A),n=b(A,"DIV",{class:!0});var K=E(n);v=b(K,"BUTTON",{type:!0,class:!0});var M=E(v);o&&o.l(M),R=N(M),U=W(M,j),M.forEach(m),K.forEach(m),A.forEach(m),x.forEach(m),G.forEach(m),L.forEach(m),this.h()},h(){d(f,"class","mb-1"),d(l,"class",V="w-full "+t[4]("password")),d(l,"type","password"),d(l,"name","password"),d(l,"autocomplete","current-password"),d(l,"placeholder",D=t[2].signIn.passwordPlaceholder()),d(_,"class","mb-2"),d(v,"type","submit"),d(v,"class","btn primary flex flex-shrink"),v.disabled=t[5],d(n,"class","flex flex-row justify-end"),d(a,"class","flex flex-grow flex-col bg-white p-4 shadow dark:bg-gray-800"),d(u,"class","mx-auto flex w-full flex-shrink flex-col p-4 py-10 md:w-72"),d(r,"class","flex flex-grow flex-col justify-end md:justify-start")},m(s,g){H(s,e,g),H(s,r,g),c(r,u),c(u,a),c(a,f),c(f,P),c(a,S),c(a,p),c(p,_),c(_,l),X(l,t[3]),c(_,k),ae(I,_,null),c(p,T),c(p,n),c(n,v),o&&o.m(v,null),c(v,R),c(v,U),y=!0,$||(z=[F(l,"input",t[9]),F(l,"input",t[6]),F(p,"submit",oe(t[7]))],$=!0)},p(s,[g]){(!y||g&4)&&i!==(i=s[2].signIn.title())&&(document.title=i),(!y||g&4)&&h!==(h=s[2].signIn.title()+"")&&Y(P,h),(!y||g&16&&V!==(V="w-full "+s[4]("password")))&&d(l,"class",V),(!y||g&4&&D!==(D=s[2].signIn.passwordPlaceholder()))&&d(l,"placeholder",D),g&8&&l.value!==s[3]&&X(l,s[3]);const L={};g&2&&(L.result=s[1]),I.$set(L),s[0]?o?g&1&&C(o,1):(o=ee(),o.c(),C(o,1),o.m(v,R)):o&&(pe(),O(o,1,1,()=>{o=null}),fe()),(!y||g&4)&&j!==(j=s[2].signIn.signIn()+"")&&Y(U,j),(!y||g&32)&&(v.disabled=s[5])},i(s){y||(C(I.$$.fragment,s),C(o),y=!0)},o(s){O(I.$$.fragment,s),O(o),y=!1},d(s){s&&(m(e),m(r)),re(I),o&&o.d(),$=!1,ie(z)}}}const Te=t=>ge((i={},e)=>{e.length&&(we(e),be("password",t.errors.message.required(),()=>{Ie(i.password).isNotBlank()}))});function je(t,i,e){let r,u,a,f,h,P;Z(t,ye,n=>e(2,h=n)),Z(t,Ve,n=>e(11,P=n));let S=`${Pe}/new`;ue(()=>{const n=P.url.searchParams.get("redirect");n&&(S=decodeURIComponent(n))});let p="";const _=new Set,l=he(()=>{r({password:p},Array.from(_)).done(n=>{e(1,u=n)}),_.clear()},300);function V(){_.add("password"),l(),l.flush()}function D(n){n.currentTarget.value=n.currentTarget.value.trim(),_.add(n.currentTarget.name),l()}let k=!1;async function I(n){try{e(0,k=!0),V(),u.isValid()&&(await Ee(p),await ke(S))}catch{Se(h.errors.message.invalid())}finally{e(0,k=!1)}}function T(){p=this.value,e(3,p)}return t.$$.update=()=>{t.$$.dirty&4&&e(8,r=Te(h)),t.$$.dirty&256&&e(1,u=r.get()),t.$$.dirty&1&&e(5,a=k),t.$$.dirty&2&&e(4,f=_e(u,{untested:"untested",tested:"tested",invalid:"invalid",valid:"valid",warning:"warning"}))},[k,u,h,p,f,a,D,I,r,T]}class Me extends de{constructor(i){super(),ce(this,i,je,De,ne,{})}}export{Me as component};
